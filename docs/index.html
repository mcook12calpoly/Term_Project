<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Term Project Cook Louie: Term Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Term Project Cook Louie
   </div>
   <div id="projectbrief">Software Design of 2.5 Axis Plotter</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Term Project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Software_Design"></a>
Software Design</h1>
<h2><a class="anchor" id="Task_Diagram"></a>
Task Diagram</h2>
<p >The figure below shows the task diagram for our plotter. The read task takes values from the setpoint file and stores them in two queues- one for theta and one for r The move task takes setpoints from the queues and commands the motors to move to those setpoints The encoder task updates the encoder values and stores them in two shared variables- one for theta and one for r </p><div class="image">
<img src="Task_Diagram.png" alt=""/>
</div>
<h2><a class="anchor" id="Move"></a>
Task FSM</h2>
<p >The figure below shows the FSM diagram for the move task. The task begins by waiting for the s_done variable to update. This variable indicates if the previous movement is complete. If the movement is not complete, then the task continues to move to the last setpoint by running again with the previous setpoints. If the movement is complete, then new setpoints are loaded and movement begins. </p><div class="image">
<img src="Main_FSM.png" alt=""/>
</div>
<h2><a class="anchor" id="Encoder"></a>
Encoder Task FSM</h2>
<p >The encoder task updates the encoder values and stores them in shared variables for use in other tasks and functions. </p><div class="image">
<img src="Encoder_FSM.png" alt=""/>
</div>
<h2><a class="anchor" id="Read"></a>
Read Task FSM</h2>
<p >The read task waits for queue space and places setpoint values into queues for use in move task. </p><div class="image">
<img src="Read_FSM.png" alt=""/>
</div>
<h2><a class="anchor" id="G_Code"></a>
G-Code to Position Program FSM</h2>
<p >The figure below shows the FSM diagram for the G-Code to Position Task. This task takes the data from the G-code file and parses it. Depending on the first 3 characters of the line, different states are entered. If the command is a movement command, the X and Y coordinates are translated to polar setpoints, and desired setpoint values are stored in a list. Once the values are stored in a list, the program loops and reads the next line of G-code. </p><div class="image">
<img src="G_Code_FSM.png" alt=""/>
</div>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
